(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{407:function(t,e,r){var content=r(426);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(26).default)("1fdf2aec",content,!0,{sourceMap:!1})},425:function(t,e,r){"use strict";r(407)},426:function(t,e,r){(e=r(25)(!1)).push([t.i,".page-wrapper[data-v-3140083c]{width:55%;padding:0 0 50px}.form-variants[data-v-3140083c]{flex-wrap:wrap}.form-category[data-v-3140083c],.form-variants[data-v-3140083c]{display:flex;align-items:center;justify-content:space-between}",""]),t.exports=e},449:function(t,e,r){"use strict";r.r(e);r(243),r(244),r(22);var l=r(4),o={layout:"admin",middleware:["admin-auth"],head:function(){return{title:"".concat(this.product.title)}},validate:function(t){var e=t.params;return Boolean(e.id)},asyncData:function(t){return Object(l.a)(regeneratorRuntime.mark((function e(){var r,l,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.store,l=t.params,e.next=3,r.dispatch("products/FETCH_PRODUCT_BY_ID",l.id);case 3:return o=e.sent,e.abrupt("return",{product:o});case 5:case"end":return e.stop()}}),e)})))()},data:function(){return{loading:!1,image:null,controls:{title:"",labels:[{value:"no",label:"нет"},{value:"new",label:"новинка"},{value:"stock",label:"акция"}],label:"",description:"",categories:[{value:"pizza",label:"Пицца"},{value:"drinks",label:"Напитки"}],category:"",subcategories:[{category:"pizza",value:"meat",label:"мясная"},{category:"pizza",value:"vegetarian",label:"вегатарианская"}],subcategory:"",size:"",cost:"",type:""},rules:{title:[{required:!0,message:"Наименование не должно быть пустым",trigger:"blur"}],description:[{required:!0,message:"Поле не должно быть пустым",trigger:"blur"}],category:[{required:!0,message:"Поле не должно быть пустым",trigger:"blur"}],subcategory:[{required:!0,message:"Поле не должно быть пустым",trigger:"blur"}]}}},methods:{onSubmit:function(){var t=this;this.$refs.form.validate(function(){var e=Object(l.a)(regeneratorRuntime.mark((function e(r){var l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=14;break}return t.loading=!0,l={id:t.product.id,title:t.controls.title,label:t.controls.label,category:t.controls.category,subcategory:t.controls.subcategory,description:t.controls.description,size:t.controls.size,cost:t.controls.cost,type:t.controls.type,image:t.image},e.prev=3,e.next=6,t.$store.dispatch("products/UPDATE_PRODUCT",l);case 6:t.$message.success("Информация о товаре обновлена"),t.loading=!1,t.$router.push("/admin/list"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),t.loading=!1;case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}())},handleRemove:function(t,e){console.log(t,e)},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0}}},n=(r(425),r(12)),component=Object(n.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page-wrapper"},[r("el-breadcrumb",{staticClass:"mb",attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:"/admin/list"}},[t._v("Товары")]),t._v(" "),r("el-breadcrumb-item",[t._v(t._s(t.product.title))])],1),t._v(" "),r("el-form",{ref:"form",attrs:{model:t.controls,rules:t.rules},nativeOn:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[r("h1",[t._v("Редактирование товара")]),t._v(" "),r("el-form-item",{attrs:{label:"Наименование товара",prop:"title"}},[r("el-input",{model:{value:t.controls.title,callback:function(e){t.$set(t.controls,"title","string"==typeof e?e.trim():e)},expression:"controls.title"}})],1),t._v(" "),r("el-select",{staticClass:"mb",attrs:{placeholder:"Лэйбл"},model:{value:t.controls.label,callback:function(e){t.$set(t.controls,"label",e)},expression:"controls.label"}},t._l(t.controls.labels,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),r("div",{staticClass:"form-category"},[r("el-select",{attrs:{placeholder:"Категория"},model:{value:t.controls.category,callback:function(e){t.$set(t.controls,"category",e)},expression:"controls.category"}},t._l(t.controls.categories,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),r("el-select",{attrs:{disabled:!t.controls.category,placeholder:"Подкатегория"},model:{value:t.controls.subcategory,callback:function(e){t.$set(t.controls,"subcategory",e)},expression:"controls.subcategory"}},t._l(t.controls.subcategories,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"Состав через запятую",prop:"description"}},[r("el-input",{attrs:{type:"textarea",resize:"none"},model:{value:t.controls.description,callback:function(e){t.$set(t.controls,"description","string"==typeof e?e.trim():e)},expression:"controls.description"}})],1),t._v(" "),r("div",{staticClass:"form-variants"},[r("h4",{staticClass:"form-subtitle",staticStyle:{width:"100%"}},[t._v("Опции")]),t._v(" "),r("el-form-item",{staticStyle:{width:"45%"},attrs:{label:"Размер (объем)",prop:"size"}},[r("el-input",{model:{value:t.controls.size,callback:function(e){t.$set(t.controls,"size","string"==typeof e?e.trim():e)},expression:"controls.size"}})],1),t._v(" "),r("el-form-item",{staticStyle:{width:"45%"},attrs:{label:"Стоимость",prop:"cost"}},[r("el-input",{model:{value:t.controls.cost,callback:function(e){t.$set(t.controls,"cost","string"==typeof e?e.trim():e)},expression:"controls.cost"}})],1),t._v(" "),r("el-form-item",{staticStyle:{width:"45%"},attrs:{label:"Тип (через запятую)",prop:"type"}},[r("el-input",{model:{value:t.controls.type,callback:function(e){t.$set(t.controls,"type","string"==typeof e?e.trim():e)},expression:"controls.type"}})],1)],1),t._v(" "),r("el-upload",{attrs:{drag:"",action:"https://jsonplaceholder.typicode.com/posts/",multiple:"","on-change":t.handleImageChange,"auto-upload":"false"}},[r("i",{staticClass:"el-icon-upload"}),t._v(" "),r("div",{staticClass:"el-upload__text"},[t._v("\n        Drop file here or "),r("em",[t._v("click to upload")])]),t._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("\n        jpg/png files with a size less than 500kb\n      ")])]),t._v(" "),r("el-button",{attrs:{type:"success","native-type":"submit",round:"",loading:t.loading}},[t._v("Обновить")])],1)],1)}),[],!1,null,"3140083c",null);e.default=component.exports}}]);