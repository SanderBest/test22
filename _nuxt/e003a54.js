(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{402:function(e,t,l){var content=l(416);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,l(26).default)("7ee92b66",content,!0,{sourceMap:!1})},415:function(e,t,l){"use strict";l(402)},416:function(e,t,l){(t=l(25)(!1)).push([e.i,".create[data-v-7d4f8e58]{width:55%;padding:0 0 50px}",""]),e.exports=t},447:function(e,t,l){"use strict";l.r(t);l(243),l(244),l(22);var o=l(4),r={layout:"admin",middleware:["admin-auth"],data:function(){return{loading:!1,image:null,controls:{title:"",labels:[{value:"no",label:"нет"},{value:"new",label:"новинка"},{value:"stock",label:"акция"}],label:"",description:"",categories:[{value:"pizza",label:"Пицца"},{value:"drinks",label:"Напитки"}],category:"",subcategories:[{category:"pizza",value:"meat",label:"мясная"},{category:"pizza",value:"vegetarian",label:"вегатарианская"}],subcategory:"",size:"",cost:"",type:""},rules:{title:[{required:!0,message:"Наименование не должно быть пустым",trigger:"blur"}],description:[{required:!0,message:"Поле не должно быть пустым",trigger:"blur"}],category:[{required:!0,message:"Поле не должно быть пустым",trigger:"blur"}],subcategory:[{required:!0,message:"Поле не должно быть пустым",trigger:"blur"}]}}},methods:{onSubmit:function(){var e=this;this.$refs.form.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(l){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l||!e.image){t.next=25;break}return e.loading=!0,o={title:e.controls.title,label:e.controls.label,category:e.controls.category,subcategory:e.controls.subcategory,description:e.controls.description,size:e.controls.size,cost:e.controls.cost,type:e.controls.type,image:e.image},t.prev=3,t.next=6,e.$store.dispatch("products/CREATE_PRODUCT",o);case 6:e.$message.success("Товар создан"),e.controls.title="",e.controls.label="",e.controls.category="",e.controls.subcategory="",e.controls.description="",e.controls.size="",e.controls.cost="",e.controls.type="",e.image=null,e.$refs.upload.clearFiles(),e.loading=!1,t.next=23;break;case 20:t.prev=20,t.t0=t.catch(3),e.loading=!1;case 23:t.next=26;break;case 25:e.$message.warning("Не все поля заполнены!");case 26:case"end":return t.stop()}}),t,null,[[3,20]])})));return function(e){return t.apply(this,arguments)}}())},handleImageChange:function(e,t){this.image=e.raw}}},n=(l(415),l(12)),component=Object(n.a)(r,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"create"},[l("el-form",{ref:"form",attrs:{model:e.controls,rules:e.rules},nativeOn:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[l("h1",[e._v("Создать товар")]),e._v(" "),l("el-form-item",{attrs:{label:"Наименование товара",prop:"title"}},[l("el-input",{model:{value:e.controls.title,callback:function(t){e.$set(e.controls,"title","string"==typeof t?t.trim():t)},expression:"controls.title"}})],1),e._v(" "),l("el-select",{staticClass:"mb",attrs:{placeholder:"Лэйбл"},model:{value:e.controls.label,callback:function(t){e.$set(e.controls,"label",t)},expression:"controls.label"}},e._l(e.controls.labels,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),l("div",{staticClass:"form-category"},[l("el-select",{attrs:{placeholder:"Категория"},model:{value:e.controls.category,callback:function(t){e.$set(e.controls,"category",t)},expression:"controls.category"}},e._l(e.controls.categories,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),l("el-select",{attrs:{disabled:!e.controls.category,placeholder:"Подкатегория"},model:{value:e.controls.subcategory,callback:function(t){e.$set(e.controls,"subcategory",t)},expression:"controls.subcategory"}},e._l(e.controls.subcategories,(function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"Состав через запятую",prop:"description"}},[l("el-input",{attrs:{type:"textarea",resize:"none"},model:{value:e.controls.description,callback:function(t){e.$set(e.controls,"description",t)},expression:"controls.description"}})],1),e._v(" "),l("div",{staticClass:"form-variants"},[l("h4",{staticClass:"form-subtitle",staticStyle:{width:"100%"}},[e._v("Опции")]),e._v(" "),l("el-form-item",{staticStyle:{width:"45%"},attrs:{label:"Размер (объем)",prop:"size"}},[l("el-input",{model:{value:e.controls.size,callback:function(t){e.$set(e.controls,"size","string"==typeof t?t.trim():t)},expression:"controls.size"}})],1),e._v(" "),l("el-form-item",{staticStyle:{width:"45%"},attrs:{label:"Стоимость",prop:"cost"}},[l("el-input",{model:{value:e.controls.cost,callback:function(t){e.$set(e.controls,"cost","string"==typeof t?t.trim():t)},expression:"controls.cost"}})],1),e._v(" "),l("el-form-item",{staticStyle:{width:"45%"},attrs:{label:"Тип (через запятую)",prop:"type"}},[l("el-input",{model:{value:e.controls.type,callback:function(t){e.$set(e.controls,"type","string"==typeof t?t.trim():t)},expression:"controls.type"}})],1)],1),e._v(" "),l("el-upload",{ref:"upload",staticClass:"mb2",attrs:{drag:"",action:"https://jsonplaceholder.typicode.com/posts/",multiple:"","on-change":e.handleImageChange,"auto-upload":!1,"thumbnail-mode":"true"}},[l("i",{staticClass:"el-icon-upload"}),e._v(" "),l("div",{staticClass:"el-upload__text"},[e._v("\n        Перетащите файл сюда "),l("em",[e._v("либо кликните")])]),e._v(" "),l("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("jpg/png файлы менее 500kb")])]),e._v(" "),l("el-button",{attrs:{type:"success","native-type":"submit",round:"",loading:e.loading}},[e._v("Создать")])],1)],1)}),[],!1,null,"7d4f8e58",null);t.default=component.exports}}]);